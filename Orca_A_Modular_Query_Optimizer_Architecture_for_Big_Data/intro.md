<font face="微软雅黑">

# ABSTRACT
The performance of analytical query processing in data man-agement systems depends primarily on the capabilities of the system's query optimizer. Increased data volumes and heightened interest in processing complex analytical queries have prompted Pivotal to build a new query optimizer.  
In this paper we present the architecture of Orca, the new query optimizer for all Pivotal data management products, including Pivotal Greenplum Database and Pivotal HAWQ. Orca is a comprehensive development uniting state-of-the-art query optimization technology with own original research resulting in a modular and portable optimizer architecture.  
In addition to describing the overall architecture, we high-light several unique features and present performance com-parisons against other systems.
# INTRODUCTION
Big Data has brought about a renewed interest in query optimization as a new breed of data management systems has pushed the envelope in terms of unprecedented scal-ability, availability, and processing capabilities (cf. e.g.,[9, 18, 20, 21]), which makes large datasets of hundreds of terabytes or even petabytes readily accessible for analysis through SQL or SQL-like interfaces. Dierences between good and mediocre optimizers have always been known to be substantial [15]. However, the increased amount of data these systems have to process magnies optimization mis-takes and stresses the importance of query optimization more than ever  
Despite a plethora of research in this area, most exist-ing query optimizers in both commercial and open source projects are still primarily based on technology dating back to the early days of commercial database development [22],and are frequently prone to produce suboptimal results.  
Realizing this signicant gap between research and prac-tical implementations, we have set out to devise an architec-ture that meets current requirements, yet promises enough headroom for future developments.  
In this paper, we describe Orca, the result of our recent re-search and development efforts at Greenplum/Pivotal. Orca is a state-of-the-art query optimizer specifically designed for demanding analytics workloads. It is distinguished from other optimizers in several important ways:  
**Modularity.** Using a highly extensible abstraction of meta-data and system description, Orca is no longer confined to a specific host system like traditional optimizers. Instead it can be ported to other data management systems quickly through plug-ins supported by its Metadata Provider SDK.  
**Extensibility.** By representing all elements of a query and its optimization as first-class citizens of equal footing, Orca avoids the trap of multi-phase optimization where certain optimizations are dealt with as an afterthought. Multi-phase optimizers are notoriously diffcult to extend as new optimizations or query constructs often do not match the previously set phase boundaries.  
**Multi-core ready.** Orca deploys a highly efficient multicore aware scheduler that distributes individual finegrained optimization subtasks across multiple cores for speed-up of the optimization process.  
**Verifiability.** Orca has special provisions for ascertaining correctness and performance on the level of built-in mechanisms. Besides improving engineering practices, these tools enable rapid development with high confidence and lead to reduced turnaround time for both new features as well as bug fixes.  
**Performance.** Orca is a substantial improvement over our previous system and in many cases offiers query speedup of 10x up to 1000x.  
We describe the architecture of Orca and highlight some of the advanced features enabled by its design. We provide a blueprint of various components and detail the engineering practices we have pioneered and deployed to realize this project. Lastly, we give performance results based on the TPC-DS benchmark comparing Orca to other systems. In particular, we focus on query processing systems contributed to the open source space.  
The remainder of this paper is organized as follows. We give preliminaries on the computing architecture in Section 2. In Section 3, we present the architecture of Orca and describe its components. Section 4 presents the query optimization workflow. Section 5 describes how Orca exchanges metadata with the backend database system. We describe in Section 6 the tools we built to maintain a verifiable query optimizer. Section 7 presents our experimental study, followed by a discussion of related work in Section 8. We summarize this paper with final remarks in Section 9.